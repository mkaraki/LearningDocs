# crontabの時間を読んでみよう

## 対象者
- 日付がわかる
- 未来の予定を考えることができる
- コンピュータを最低限触れる

この記事は、筆者が`crontab`の書式を忘れたときのためのメモとしての要素が強いです。

一応トピックがかなり優しいのでお子様でも楽しめそうなコンテンツにしています。
（保護者必須ではありますが）

### お子様が楽しまれる場合
もしお子様が楽しまれるのであれば、[crontabでの時間と日付のフォーマット](#crontabでの時間と日付のフォーマット)セクション内をわかりやすく読み替えてあげてください。
本文の間に難しい言葉で書かれている見出しがあります。これは無視して構いません。すべて本文に書いてあります。

必要に応じて本文中の例を差し替えてください。

## 環境
- [crontab guru](https://crontab.guru)

## crontabとは
`crontab`はコンピュータに自動的に処理をさせる際の設定ファイル（もしくはソフトウェア）の名前です。

`crontab`はその性質上、任意の時間を範囲で指定します。
今回の資料では、その時間の表記を学習します。

## crontabでの時間と日付のフォーマット
`crontab`では少し変わった時間（日付）の表し方をします。

下記がcrontabの一例です。意味を予測…は難しそうですね。
```
* * * * *
```

crontabでは下記のように日付を指定します。
```
分 時 日 月 曜日
```

つまり、先ほどの例は
```
*月 *日 *曜日 *時 *分
```
ということです。
はっきり言って訳が分からないですよね。

この`*`はすべての数字を表します。

例えば、`*時`なら`0時から23時まで`といった感じです

では、先ほどの例はどうなるでしょう。
結論は`毎分`（1分おきに）です。

（正確には`1-12`月の`1-31`日の`日から土曜日`の`0-23`時`0-59`分**なのであれば**）

### 下位がワイルドカード、上位が固定の場合

では、次の例ではどうでしょう
```
* 1 * * *
```

この場合、`1時*分`というようになり、1時から1時59分まで毎分実行するという意味になります。

少し難易度をあげましょう。次の日付を解読できますか？
```
1 21 * 3 *
```

これは、`3月の21時1分に`という意味です。3月の間は毎日21時1分に実行されます。

### 曜日と範囲

では、初めての書式です。意味はなんでしょうか？
```
0 6 * * 1-5
```

正解は`月曜から金曜の毎朝6時`です。

おそらく`1-5`の部分がわからなかったと思います。
対応表を用意しました。

|曜日|数値|備考|
|:--|:--|:--|
|日曜日|0||
|月曜日|1||
|火曜日|2||
|水曜日|3||
|木曜日|4||
|金曜日|5||
|土曜日|6||
|日曜日|7|一部の環境で非対応|

日曜日が2つあるのは、特別な場所で`0`ではなく`7`として利用されているからです。

さて、`1`と`5`の意味はこの表で理解していただけたでしょう。
では間にあった`-`はどういう意味でしょうか。

これは、`1から5の間`という意味になります。
そのため、月曜日から金曜日となったわけです。

### 複数の値

別の例も見てみましょう。意味がわかりますか？
```
0,30 * * * 1,3,5
```

また新しい記号が出てきました。
今度は`,`です。

これは`または`を表します。

そのため、この文は`月曜日か水曜日か金曜日`の`毎時0分と30分`という意味になります。

### 毎にを指定

新しい例です。これの意味は予測が難しいですよ。
```
*/15 * * * *
```

これは、`15分おきに`を指定します。
`/15`の部分です。

ほかの書式としてこのような物もあります。
```
0-30/5 * * * *
```

この場合、`0分から30分`の間、`5分おきに`という意味になります。

実際に使うとしたら次のような使い方になるかと思います。
```
0 9-17/2 * * *
```

この例では、9時から17時の間2時間おきに実行するという意味になります。
作業中の仕事データを定期的にバックアップする用途などで使えそうですね。

## 最後に
最後に次の`crontab`を読み解いて見てください。
```
*/15 9-17,21-23 * * 1-6
```

意味は、`月曜から金曜`の`9時から17時`と`21時から23時`の間`15分おきに`です。
読み解けたならあとは実際にいろいろと書いてみましょう！